{"version":3,"sources":["../../../../src/modules/ide/ide-query/resolverMutation-ide-query.js"],"names":["fs","promisifyAll","require","queriesPath","process","cwd","ideQueryCreate","obj","args","context","data","created","Date","toISOString","writeFileAsync","id","JSON","stringify","then","RESULTS_","result","catch","console","log","error","type","message","ideQueryRemove"],"mappings":"AAAA;;;;;;;;AAGA;;;;;;AAEA,IAAMA,KAAK,mBAASC,YAAT,CAAsBC,QAAQ,IAAR,CAAtB,CAAX;AACA,IAAMC,cAAiBC,QAAQC,GAAR,EAAjB,oBAAN;;kBAGe;AACbC,gBADa,0BACGC,GADH,EACQC,IADR,EACcC,OADd,EACuB;AAClC,QAAMC,oBACDF,IADC;AAEJG,eAAS,IAAIC,IAAJ,GAAWC,WAAX;AAFL,MAAN;;AAKA,WAAOb,GAAGc,cAAH,CAAqBX,WAArB,SAAoCK,KAAKO,EAAzC,kBAA0DC,KAAKC,SAAL,CAAeP,IAAf,CAA1D,EACJQ,IADI,CACC,YAAM;AACV,aAAO,EAAEC,UAAW;AAClBC,kBAAQ;AADU,SAAb,EAAP;AAGD,KALI,EAMJC,KANI,CAME,iBAAS;AACdC,cAAQC,GAAR,CAAYC,KAAZ;;AAEA,aAAO,EAAEL,UAAU;AACjBC,kBAAQ,IADS;AAEjBI,iBAAO;AACLC,kBAAM,kBADD;AAELC,qBAAS;AAFJ;AAFU,SAAZ,EAAP;AAOD,KAhBI,CAAP;AAiBD,GAxBY;AA0BbC,gBA1Ba,0BA0BGpB,GA1BH,EA0BQC,IA1BR,EA0BcC,OA1Bd,EA0BuB,CAEnC;AA5BY,C","file":"resolverMutation-ide-query.js","sourcesContent":["'use strict';\n\n\nimport Bluebird from 'bluebird';\n\nconst fs = Bluebird.promisifyAll(require('fs'));\nconst queriesPath = `${process.cwd()}/server/queries`;\n\n\nexport default {\n  ideQueryCreate (obj, args, context) {\n    const data = {\n      ...args,\n      created: new Date().toISOString()\n    };\n\n    return fs.writeFileAsync(`${queriesPath}/${args.id}-query.json`, JSON.stringify(data))\n      .then(() => {\n        return { RESULTS_ : { \n          result: 'ok' \n        } };\n      })\n      .catch(error => {\n        console.log(error);\n\n        return { RESULTS_: { \n          result: 'ok',\n          error: {\n            type: 'QUERY_SAVE_ERROR',\n            message: 'Query did not save'\n          }\n        } };\n      });\n  },\n\n  ideQueryRemove (obj, args, context) {\n\n  }\n};\n"]}