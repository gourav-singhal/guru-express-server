{"version":3,"sources":["../../../../../src/modules/ide/ide-persisted-history/resolver/resolverMutation-ide-persisted-history.js"],"names":["fs","promisifyAll","require","idePersistedHistoryClear","obj","args","context","db","set","history","write","writeFileAsync","idePersistedHistorySave","defaults","get","push"],"mappings":"AAAA;;;;;;AACA;;;;AACA;;;;AACA;;;;AACA,IAAMA,KAAK,mBAASC,YAAT,CAAsBC,QAAQ,IAAR,CAAtB,CAAX;;kBAEe;AACbC,0BADa,oCACaC,GADb,EACkBC,IADlB,EACwBC,OADxB,EACiC;AAC5C,QAAMC,KAAK,uDAAX;AACAA,OAAGC,GAAH,CAAO,EAAEC,SAAS,EAAX,EAAP,EAAwBC,KAAxB;;AAEAV,OAAGW,cAAH,oCAA0C,wBAA1C;AACA,WAAO,EAAP;AACD,GAPY;AASbC,yBATa,mCASYR,GATZ,EASiBC,IATjB,EASuBC,OATvB,EASgC;AAC3C,QAAMC,KAAK,uDAAX;;AAEAA,OAAGM,QAAH,CAAY,EAAEJ,SAAS,EAAX,EAAZ,EAA6BC,KAA7B;AACAH,OAAGO,GAAH,CAAO,SAAP,EAAkBC,IAAlB,CAAuBV,IAAvB,EAA6BK,KAA7B;AACD;AAdY,C","file":"resolverMutation-ide-persisted-history.js","sourcesContent":["'use strict';\nimport Bluebird from 'bluebird';\nimport low from 'lowdb';\nimport { PERSISTED_HISTORY_FILE } from '../../../constants';\nconst fs = Bluebird.promisifyAll(require('fs'));\n\nexport default {\n  idePersistedHistoryClear (obj, args, context) {\n    const db = low(PERSISTED_HISTORY_FILE);\n    db.set({ history: [] }).write();\n\n    fs.writeFileAsync(PERSISTED_HISTORY_FILE, '{\\n  \"history\": [] \\n}');\n    return [];\n  },\n\n  idePersistedHistorySave (obj, args, context) {\n    const db = low(PERSISTED_HISTORY_FILE);\n\n    db.defaults({ history: [] }).write();\n    db.get('history').push(args).write();\n  }\n};\n"]}