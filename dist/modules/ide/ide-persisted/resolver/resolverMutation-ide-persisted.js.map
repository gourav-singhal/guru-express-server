{"version":3,"sources":["../../../../../src/modules/ide/ide-persisted/resolver/resolverMutation-ide-persisted.js"],"names":["rm","fs","promisifyAll","require","idePersistedCollectionClear","obj","args","context","idePersistedCreate","data","created","Date","toISOString","writeFileAsync","id","JSON","stringify","then","RESULTS_","result","catch","console","log","error","type","message","idePersistedRemove"],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;;;AAIA;;;;IAFQA,E,qBAAAA,E;;AACR,IAAMC,KAAK,mBAASC,YAAT,CAAsBC,QAAQ,IAAR,CAAtB,CAAX;kBAGe;AACbC,6BADa,uCACgBC,GADhB,EACqBC,IADrB,EAC2BC,OAD3B,EACoC;AAC/CP,OAAG,IAAH;AACD,GAHY;AAKbQ,oBALa,8BAKOH,GALP,EAKYC,IALZ,EAKkBC,OALlB,EAK2B;AACtC,QAAME,oBACDH,IADC;AAEJI,eAAS,IAAIC,IAAJ,GAAWC,WAAX;AAFL,MAAN;;AAKA,WAAOX,GACJY,cADI,wCAEuBP,KAAKQ,EAF5B,sBAGHC,KAAKC,SAAL,CAAeP,IAAf,CAHG,EAKJQ,IALI,CAKC,YAAM;AACV,aAAO;AACLC,kBAAU;AACRC,kBAAQ;AADA;AADL,OAAP;AAKD,KAXI,EAYJC,KAZI,CAYE,iBAAS;AACdC,cAAQC,GAAR,CAAYC,KAAZ;;AAEA,aAAO;AACLL,kBAAU;AACRC,kBAAQ,IADA;AAERI,iBAAO;AACLC,kBAAM,kBADD;AAELC,qBAAS;AAFJ;AAFC;AADL,OAAP;AASD,KAxBI,CAAP;AAyBD,GApCY;AAsCbC,oBAtCa,8BAsCOrB,GAtCP,EAsCYC,IAtCZ,EAsCkBC,OAtClB,EAsC2B,CAAE;AAtC7B,C","file":"resolverMutation-ide-persisted.js","sourcesContent":["'use strict';\n\nimport Bluebird from 'bluebird';\nimport shell from 'shelljs';\n\nconst { rm } = shell;\nconst fs = Bluebird.promisifyAll(require('fs'));\nimport { PERSISTED_DIRECTORY } from '../../../constants';\n\nexport default {\n  idePersistedCollectionClear (obj, args, context) {\n    rm('-r', PERSISTED_DIRECTORY);\n  },\n\n  idePersistedCreate (obj, args, context) {\n    const data = {\n      ...args,\n      created: new Date().toISOString()\n    };\n\n    return fs\n      .writeFileAsync(\n        `${PERSISTED_DIRECTORY}/${args.id}-persisted.json`,\n        JSON.stringify(data)\n      )\n      .then(() => {\n        return {\n          RESULTS_: {\n            result: 'ok'\n          }\n        };\n      })\n      .catch(error => {\n        console.log(error);\n\n        return {\n          RESULTS_: {\n            result: 'ok',\n            error: {\n              type: 'QUERY_SAVE_ERROR',\n              message: 'Persisted did not save'\n            }\n          }\n        };\n      });\n  },\n\n  idePersistedRemove (obj, args, context) {}\n};\n"]}